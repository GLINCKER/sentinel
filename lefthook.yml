# Lefthook Configuration for Sentinel
# Built by Glincker (A GLINR Product)
#
# Fast, parallel Git hooks for Rust + Node.js polyglot project
# https://github.com/evilmartians/lefthook

# Pre-commit hook
# Runs formatting and linting on staged files
pre-commit:
  parallel: true
  commands:
    # Frontend: Format and lint JavaScript/Svelte files
    frontend-prettier:
      glob: "src/**/*.{js,svelte,css,html}"
      run: pnpm exec prettier --write {staged_files}
      stage_fixed: true

    frontend-eslint:
      glob: "src/**/*.js"
      run: pnpm exec eslint --fix {staged_files}
      stage_fixed: true

    # Backend: Format Rust code
    rust-fmt:
      glob: "src-tauri/**/*.rs"
      run: cd src-tauri && cargo fmt --all
      stage_fixed: true

    # CLI: Format Rust code
    cli-fmt:
      glob: "cli/**/*.rs"
      run: cd cli && cargo fmt --all
      stage_fixed: true

# Commit-msg hook
# Validates commit messages using commitlint
commit-msg:
  commands:
    commitlint:
      run: pnpm exec commitlint --edit {1}

# Pre-push hook (optional, disabled by default)
# Uncomment to run tests before pushing
# pre-push:
#   parallel: true
#   commands:
#     quick-test:
#       run: ./scripts/quick-test.sh
